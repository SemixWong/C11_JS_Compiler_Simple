
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown Document</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 100%;
			height:1200;
            margin: 0 auto;
            padding: 2rem;
        }
        h1, h2, h3, h4, h5, h6 { margin-top: 1.5rem; margin-bottom: 1rem; }
        pre { background: #f6f8fa; padding: 1rem; border-radius: 6px; overflow-x: auto; }
        code { background: #f6f8fa; padding: 0.2rem 0.4rem; border-radius: 3px; }
        blockquote { border-left: 4px solid #dfe2e5; padding-left: 1rem; margin: 1rem 0; color: #6a737d; }
        table { border-collapse: collapse; width: 100%; margin: 1rem 0; }
        th, td { border: 1px solid #dfe2e5; padding: 0.5rem; text-align: left; }
        th { background: #f6f8fa; }
    </style>
</head>
<body>
<h1 id="h1-javascript-c-"><a name="JavaScriptè¯­æ³•è§£æå™¨ï¼ˆçº¯æ‰‹å·¥Cè¯­è¨€å®ç°ï¼‰" class="reference-link"></a><span class="header-link octicon octicon-link"></span>JavaScriptè¯­æ³•è§£æå™¨ï¼ˆçº¯æ‰‹å·¥Cè¯­è¨€å®ç°ï¼‰</h1><p><a href=""><img src="https://img.shields.io/badge/tests-17%2F17%20passing-brightgreen" alt="Tests"></a><br><a href=""><img src="https://img.shields.io/badge/build-passing-brightgreen" alt="Build"></a><br><a href=""><img src="https://img.shields.io/badge/C-11-blue" alt="C11"></a><br><a href=""><img src="https://img.shields.io/badge/license-Educational-blue" alt="License"></a></p>
<h2 id="h2-u9879u76EEu7B80u4ECB"><a name="é¡¹ç›®ç®€ä»‹" class="reference-link"></a><span class="header-link octicon octicon-link"></span>é¡¹ç›®ç®€ä»‹</h2><p>è¿™æ˜¯ä¸€ä¸ªå®Œå…¨ä½¿ç”¨Cè¯­è¨€æ‰‹å·¥å®ç°çš„JavaScriptè¯­æ³•è§£æå™¨ï¼Œ<strong>ä¸ä¾èµ–ä»»ä½•è¯æ³•/è¯­æ³•ç”Ÿæˆå·¥å…·</strong>ï¼ˆå¦‚flexã€bisonã€re2cç­‰ï¼‰ï¼Œèƒ½å¤Ÿï¼š</p>
<ul>
<li>âœ… éªŒè¯JavaScriptè„šæœ¬çš„è¯­æ³•åˆæ³•æ€§</li><li>âœ… ä¸¥æ ¼å®ç°ECMA262æ ‡å‡†çš„è‡ªåŠ¨åˆ†å·æ’å…¥ï¼ˆASIï¼‰æœºåˆ¶</li><li>âœ… æ”¯æŒå®Œæ•´Unicodeå­—ç¬¦é›†ï¼ˆæ ‡è¯†ç¬¦ã€å­—ç¬¦ä¸²ã€æ³¨é‡Šç­‰ï¼‰</li><li>âœ… æä¾›è¯¦ç»†çš„é”™è¯¯æŠ¥å‘Šï¼ˆè¡Œå·ã€åˆ—å·ã€é”™è¯¯æè¿°ï¼‰</li><li>âœ… é›¶ç¼–è¯‘è­¦å‘Šï¼ˆ-Wall -Wextra -Wpedanticï¼‰</li><li>âœ… 100%æµ‹è¯•é€šè¿‡ç‡ï¼ˆ17/17æµ‹è¯•ç”¨ä¾‹ï¼‰</li></ul>
<h2 id="h2-u6838u5FC3u7279u6027"><a name="æ ¸å¿ƒç‰¹æ€§" class="reference-link"></a><span class="header-link octicon octicon-link"></span>æ ¸å¿ƒç‰¹æ€§</h2><h3 id="h3-1-"><a name="1. çº¯æ‰‹å·¥å®ç°" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1. çº¯æ‰‹å·¥å®ç°</h3><ul>
<li><strong>è¯æ³•åˆ†æå™¨</strong>ï¼šæ‰‹å·¥ç¼–å†™çš„çŠ¶æ€æœºï¼Œè¯†åˆ«æ‰€æœ‰JavaScriptè¯æ³•å•å…ƒ</li><li><strong>è¯­æ³•åˆ†æå™¨</strong>ï¼šé€’å½’ä¸‹é™åˆ†ææ³•ï¼Œå®Œæ•´æ”¯æŒJavaScriptè¯­æ³•è§„åˆ™</li><li><strong>æ— å¤–éƒ¨ä¾èµ–</strong>ï¼šä»…ä½¿ç”¨Cæ ‡å‡†åº“ï¼Œä¸ä¾èµ–ä»»ä½•ä»£ç ç”Ÿæˆå·¥å…·</li></ul>
<h3 id="h3-2-unicode-"><a name="2. Unicodeæ”¯æŒ" class="reference-link"></a><span class="header-link octicon octicon-link"></span>2. Unicodeæ”¯æŒ</h3><ul>
<li>æ”¯æŒUnicodeæ ‡è¯†ç¬¦ï¼ˆå¦‚ <code>const å˜é‡å = "å€¼"</code>ï¼‰</li><li>æ”¯æŒUnicodeè½¬ä¹‰åºåˆ—ï¼ˆ<code>\uXXXX</code>ï¼‰</li><li>æ­£ç¡®å¤„ç†ä¸­æ–‡ã€emojiç­‰å¤šå­—èŠ‚å­—ç¬¦</li></ul>
<h3 id="h3-3-asi-"><a name="3. ASIæœºåˆ¶ï¼ˆè‡ªåŠ¨åˆ†å·æ’å…¥ï¼‰" class="reference-link"></a><span class="header-link octicon octicon-link"></span>3. ASIæœºåˆ¶ï¼ˆè‡ªåŠ¨åˆ†å·æ’å…¥ï¼‰</h3><p>ä¸¥æ ¼æŒ‰ç…§ECMA262æ ‡å‡†å®ç°3æ¡ASIè§„åˆ™ï¼š</p>
<p><strong>è§„åˆ™1</strong>ï¼šå½“é‡åˆ°ä¸ç¬¦åˆè¯­æ³•çš„tokenï¼Œä¸”æ¢è¡Œä½ç½®å­˜åœ¨åˆ†å·åˆ™ç¬¦åˆè¯­æ³•æ—¶ï¼Œè‡ªåŠ¨æ’å…¥åˆ†å·</p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-javascript"><span class="pln">let a </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span></code></li><li class="L1"><code class="lang-javascript"><span class="pln">let b </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">  </span><span class="com">// âœ“ è‡ªåŠ¨æ’å…¥åˆ†å·</span></code></li></ol></pre>
<p><strong>è§„åˆ™2</strong>ï¼šç‰¹å®šè¯­å¥ï¼ˆreturn/break/continue/throwï¼‰åæ¢è¡Œæ—¶è‡ªåŠ¨æ’å…¥åˆ†å·</p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-javascript"><span class="kwd">function</span><span class="pln"> test</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="lang-javascript"><span class="pln">    </span><span class="kwd">return</span><span class="pln">      </span><span class="com">// âœ“ è¿™é‡Œè‡ªåŠ¨æ’å…¥åˆ†å·</span></code></li><li class="L2"><code class="lang-javascript"><span class="pln">    </span><span class="lit">42</span><span class="pln">          </span><span class="com">// ä¸æ˜¯è¿”å›å€¼ï¼Œæ˜¯ç‹¬ç«‹è¯­å¥</span></code></li><li class="L3"><code class="lang-javascript"><span class="pun">}</span></code></li></ol></pre>
<p><strong>è§„åˆ™3</strong>ï¼šè¾“å…¥ç»“æŸæ—¶è‡ªåŠ¨æ’å…¥åˆ†å·</p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-javascript"><span class="pln">let x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">100</span><span class="pln">  </span><span class="com">// âœ“ æ–‡ä»¶ç»“æŸï¼Œè‡ªåŠ¨æ’å…¥åˆ†å·</span></code></li></ol></pre>
<p><strong>ç‰¹æ®Šå¤„ç†</strong>ï¼šthrowåä¸å…è®¸æ¢è¡Œï¼ˆå¿…é¡»æŠ¥é”™ï¼‰</p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-javascript"><span class="kwd">function</span><span class="pln"> test</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="lang-javascript"><span class="pln">    </span><span class="kwd">throw</span><span class="pln">       </span><span class="com">// âœ— é”™è¯¯ï¼throwåæ¢è¡Œä¸ç¬¦åˆè¯­æ³•</span></code></li><li class="L2"><code class="lang-javascript"><span class="pln">    </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Error</span><span class="pun">()</span></code></li><li class="L3"><code class="lang-javascript"><span class="pun">}</span></code></li></ol></pre>
<h3 id="h3-4-javascript-"><a name="4. æ”¯æŒçš„JavaScriptè¯­æ³•" class="reference-link"></a><span class="header-link octicon octicon-link"></span>4. æ”¯æŒçš„JavaScriptè¯­æ³•</h3><h4 id="h4-u8BEDu53E5u7C7Bu578B"><a name="è¯­å¥ç±»å‹" class="reference-link"></a><span class="header-link octicon octicon-link"></span>è¯­å¥ç±»å‹</h4><ul>
<li>å˜é‡å£°æ˜ï¼š<code>var</code>ã€<code>let</code>ã€<code>const</code></li><li>å‡½æ•°å£°æ˜ï¼š<code>function</code>ã€ç®­å¤´å‡½æ•°</li><li>ç±»å£°æ˜ï¼š<code>class</code>ã€<code>extends</code>ã€é™æ€æ–¹æ³•ã€getter/setter</li><li>æ§åˆ¶æµï¼š<code>if/else</code>ã€<code>while</code>ã€<code>do-while</code>ã€<code>for</code>ã€<code>for-in</code>ã€<code>for-of</code>ã€<code>switch</code></li><li>å¼‚å¸¸å¤„ç†ï¼š<code>try</code>ã€<code>catch</code>ã€<code>finally</code>ã€<code>throw</code></li><li>è·³è½¬è¯­å¥ï¼š<code>return</code>ã€<code>break</code>ã€<code>continue</code></li></ul>
<h4 id="h4-u8868u8FBEu5F0Fu7C7Bu578B"><a name="è¡¨è¾¾å¼ç±»å‹" class="reference-link"></a><span class="header-link octicon octicon-link"></span>è¡¨è¾¾å¼ç±»å‹</h4><ul>
<li>ç®—æœ¯è¿ç®—ï¼š<code>+</code>ã€<code>-</code>ã€<code>*</code>ã€<code>/</code>ã€<code>%</code>ã€<code>**</code></li><li>æ¯”è¾ƒè¿ç®—ï¼š<code>==</code>ã€<code>===</code>ã€<code>!=</code>ã€<code>!==</code>ã€<code>&lt;</code>ã€<code>&gt;</code>ã€<code>&lt;=</code>ã€<code>&gt;=</code></li><li>é€»è¾‘è¿ç®—ï¼š<code>&amp;&amp;</code>ã€<code>||</code>ã€<code>!</code>ã€<code>??</code></li><li>ä½è¿ç®—ï¼š<code>&amp;</code>ã€<code>|</code>ã€<code>^</code>ã€<code>~</code>ã€<code>&lt;&lt;</code>ã€<code>&gt;&gt;</code>ã€<code>&gt;&gt;&gt;</code></li><li>èµ‹å€¼è¿ç®—ï¼š<code>=</code>ã€<code>+=</code>ã€<code>-=</code>ã€<code>*=</code>ã€<code>/=</code>ç­‰</li><li>æˆå‘˜è®¿é—®ï¼š<code>.</code>ã€<code>[]</code>ã€<code>?.</code>ï¼ˆå¯é€‰é“¾ï¼‰</li><li>å‡½æ•°è°ƒç”¨ã€<code>new</code>è¡¨è¾¾å¼</li><li>å¯¹è±¡/æ•°ç»„å­—é¢é‡</li><li>æ¨¡æ¿å­—ç¬¦ä¸²ã€æ­£åˆ™è¡¨è¾¾å¼</li></ul>
<h2 id="h2-u6587u4EF6u7ED3u6784"><a name="æ–‡ä»¶ç»“æ„" class="reference-link"></a><span class="header-link octicon octicon-link"></span>æ–‡ä»¶ç»“æ„</h2><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pun">.</span></code></li><li class="L1"><code><span class="pun">â”œâ”€â”€</span><span class="pln"> common</span><span class="pun">.</span><span class="pln">h </span><span class="pun">/</span><span class="pln"> common</span><span class="pun">.</span><span class="pln">c      </span><span class="com"># å…¬å…±å®šä¹‰ï¼ˆé”™è¯¯ç ã€ä½ç½®ä¿¡æ¯ç­‰ï¼‰</span></code></li><li class="L2"><code><span class="pun">â”œâ”€â”€</span><span class="pln"> lexer</span><span class="pun">.</span><span class="pln">h </span><span class="pun">/</span><span class="pln"> lexer</span><span class="pun">.</span><span class="pln">c        </span><span class="com"># è¯æ³•åˆ†æå™¨å®ç°ï¼ˆ855è¡Œï¼‰</span></code></li><li class="L3"><code><span class="pun">â”œâ”€â”€</span><span class="pln"> parser</span><span class="pun">.</span><span class="pln">h </span><span class="pun">/</span><span class="pln"> parser</span><span class="pun">.</span><span class="pln">c      </span><span class="com"># è¯­æ³•åˆ†æå™¨å®ç°ï¼ˆ1332è¡Œï¼‰</span></code></li><li class="L4"><code><span class="pun">â”œâ”€â”€</span><span class="pln"> main</span><span class="pun">.</span><span class="pln">c                   </span><span class="com"># ä¸»ç¨‹åºå…¥å£</span></code></li><li class="L5"><code><span class="pun">â”œâ”€â”€</span><span class="pln"> </span><span class="typ">Makefile</span><span class="pln">                 </span><span class="com"># ç¼–è¯‘é…ç½®</span></code></li><li class="L6"><code><span class="pun">â”œâ”€â”€</span><span class="pln"> run_tests</span><span class="pun">.</span><span class="pln">ps1            </span><span class="com"># PowerShellæµ‹è¯•è„šæœ¬</span></code></li><li class="L7"><code><span class="pun">â”œâ”€â”€</span><span class="pln"> run_tests</span><span class="pun">.</span><span class="pln">bat            </span><span class="com"># æ‰¹å¤„ç†æµ‹è¯•è„šæœ¬</span></code></li><li class="L8"><code><span class="pun">â”œâ”€â”€</span><span class="pln"> README</span><span class="pun">.</span><span class="pln">md                </span><span class="com"># æœ¬æ–‡æ¡£</span></code></li><li class="L9"><code><span class="pun">â””â”€â”€</span><span class="pln"> tests</span><span class="pun">/</span><span class="pln">                   </span><span class="com"># æµ‹è¯•ç”¨ä¾‹ç›®å½•</span></code></li><li class="L0"><code><span class="pln">    </span><span class="pun">â”œâ”€â”€</span><span class="pln"> valid</span><span class="pun">/</span><span class="pln">               </span><span class="com"># åˆæ³•è„šæœ¬æµ‹è¯•ï¼ˆ9ä¸ªï¼‰</span></code></li><li class="L1"><code><span class="pln">    </span><span class="pun">â”‚</span><span class="pln">   </span><span class="pun">â”œâ”€â”€</span><span class="pln"> </span><span class="lit">01</span><span class="pln">_basic_syntax</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L2"><code><span class="pln">    </span><span class="pun">â”‚</span><span class="pln">   </span><span class="pun">â”œâ”€â”€</span><span class="pln"> </span><span class="lit">02</span><span class="pln">_asi_cases</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L3"><code><span class="pln">    </span><span class="pun">â”‚</span><span class="pln">   </span><span class="pun">â”œâ”€â”€</span><span class="pln"> </span><span class="lit">03</span><span class="pln">_unicode</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L4"><code><span class="pln">    </span><span class="pun">â”‚</span><span class="pln">   </span><span class="pun">â”œâ”€â”€</span><span class="pln"> </span><span class="lit">04</span><span class="pln">_control_flow</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L5"><code><span class="pln">    </span><span class="pun">â”‚</span><span class="pln">   </span><span class="pun">â”œâ”€â”€</span><span class="pln"> </span><span class="lit">05</span><span class="pln">_expressions</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L6"><code><span class="pln">    </span><span class="pun">â”‚</span><span class="pln">   </span><span class="pun">â”œâ”€â”€</span><span class="pln"> </span><span class="lit">06</span><span class="pln">_classes</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L7"><code><span class="pln">    </span><span class="pun">â”‚</span><span class="pln">   </span><span class="pun">â”œâ”€â”€</span><span class="pln"> </span><span class="lit">07</span><span class="pln">_regex_division</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L8"><code><span class="pln">    </span><span class="pun">â”‚</span><span class="pln">   </span><span class="pun">â”œâ”€â”€</span><span class="pln"> </span><span class="lit">08</span><span class="pln">_operator_precedence</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L9"><code><span class="pln">    </span><span class="pun">â”‚</span><span class="pln">   </span><span class="pun">â””â”€â”€</span><span class="pln"> </span><span class="lit">09</span><span class="pln">_nested_structures</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L0"><code><span class="pln">    </span><span class="pun">â””â”€â”€</span><span class="pln"> invalid</span><span class="pun">/</span><span class="pln">             </span><span class="com"># é”™è¯¯è„šæœ¬æµ‹è¯•ï¼ˆ8ä¸ªï¼‰</span></code></li><li class="L1"><code><span class="pln">        </span><span class="pun">â”œâ”€â”€</span><span class="pln"> </span><span class="lit">01</span><span class="pln">_missing_paren</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L2"><code><span class="pln">        </span><span class="pun">â”œâ”€â”€</span><span class="pln"> </span><span class="lit">02</span><span class="pln">_unterminated_string</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L3"><code><span class="pln">        </span><span class="pun">â”œâ”€â”€</span><span class="pln"> </span><span class="lit">03</span><span class="pln">_invalid_assignment</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L4"><code><span class="pln">        </span><span class="pun">â”œâ”€â”€</span><span class="pln"> </span><span class="lit">04</span><span class="pln">_throw_newline</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L5"><code><span class="pln">        </span><span class="pun">â”œâ”€â”€</span><span class="pln"> </span><span class="lit">05</span><span class="pln">_typo_keyword</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L6"><code><span class="pln">        </span><span class="pun">â”œâ”€â”€</span><span class="pln"> </span><span class="lit">06</span><span class="pln">_unclosed_brace</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L7"><code><span class="pln">        </span><span class="pun">â”œâ”€â”€</span><span class="pln"> </span><span class="lit">07</span><span class="pln">_invalid_number</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L8"><code><span class="pln">        </span><span class="pun">â””â”€â”€</span><span class="pln"> </span><span class="lit">08</span><span class="pln">_duplicate_param</span><span class="pun">.</span><span class="pln">js</span></code></li></ol></pre><h2 id="h2-u5FEBu901Fu5F00u59CB"><a name="å¿«é€Ÿå¼€å§‹" class="reference-link"></a><span class="header-link octicon octicon-link"></span>å¿«é€Ÿå¼€å§‹</h2><h3 id="h3-u7F16u8BD1"><a name="ç¼–è¯‘" class="reference-link"></a><span class="header-link octicon octicon-link"></span>ç¼–è¯‘</h3><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-bash"><span class="com"># Windowsï¼ˆPowerShellï¼‰</span></code></li><li class="L1"><code class="lang-bash"><span class="pln">mingw32</span><span class="pun">-</span><span class="pln">make</span></code></li><li class="L2"><code class="lang-bash"></code></li><li class="L3"><code class="lang-bash"><span class="com"># Linux/macOS</span></code></li><li class="L4"><code class="lang-bash"><span class="pln">make</span></code></li></ol></pre>
<p>ç¼–è¯‘æˆåŠŸåç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ <code>js_parser.exe</code>ï¼ˆWindowsï¼‰æˆ– <code>js_parser</code>ï¼ˆLinux/macOSï¼‰</p>
<h3 id="h3-u57FAu672Cu4F7Fu7528"><a name="åŸºæœ¬ä½¿ç”¨" class="reference-link"></a><span class="header-link octicon octicon-link"></span>åŸºæœ¬ä½¿ç”¨</h3><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-bash"><span class="com"># è§£æJavaScriptæ–‡ä»¶</span></code></li><li class="L1"><code class="lang-bash"><span class="pln">js_parser script</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L2"><code class="lang-bash"></code></li><li class="L3"><code class="lang-bash"><span class="com"># è§£æå­—ç¬¦ä¸²</span></code></li><li class="L4"><code class="lang-bash"><span class="pln">js_parser </span><span class="pun">-</span><span class="pln">s </span><span class="str">"let x = 10; console.log(x);"</span></code></li><li class="L5"><code class="lang-bash"></code></li><li class="L6"><code class="lang-bash"><span class="com"># æ˜¾ç¤ºå¸®åŠ©</span></code></li><li class="L7"><code class="lang-bash"><span class="pln">js_parser </span><span class="pun">-</span><span class="pln">h</span></code></li></ol></pre>
<h3 id="h3-u8FD0u884Cu6D4Bu8BD5"><a name="è¿è¡Œæµ‹è¯•" class="reference-link"></a><span class="header-link octicon octicon-link"></span>è¿è¡Œæµ‹è¯•</h3><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-bash"><span class="com"># PowerShellè„šæœ¬ï¼ˆæ¨èï¼‰</span></code></li><li class="L1"><code class="lang-bash"><span class="pln">powershell </span><span class="pun">-</span><span class="typ">ExecutionPolicy</span><span class="pln"> </span><span class="typ">Bypass</span><span class="pln"> </span><span class="pun">-</span><span class="typ">File</span><span class="pln"> </span><span class="pun">.</span><span class="pln">\run_tests</span><span class="pun">.</span><span class="pln">ps1</span></code></li><li class="L2"><code class="lang-bash"></code></li><li class="L3"><code class="lang-bash"><span class="com"># æ‰¹å¤„ç†è„šæœ¬</span></code></li><li class="L4"><code class="lang-bash"><span class="pln">run_tests</span><span class="pun">.</span><span class="pln">bat</span></code></li><li class="L5"><code class="lang-bash"></code></li><li class="L6"><code class="lang-bash"><span class="com"># Makefile</span></code></li><li class="L7"><code class="lang-bash"><span class="pln">make test</span></code></li></ol></pre>
<h3 id="h3-u6D4Bu8BD5u7ED3u679C"><a name="æµ‹è¯•ç»“æœ" class="reference-link"></a><span class="header-link octicon octicon-link"></span>æµ‹è¯•ç»“æœ</h3><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pun">========================================</span></code></li><li class="L1"><code><span class="pln">  </span><span class="typ">JavaScript</span><span class="pln"> </span><span class="typ">Parser</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="typ">Test</span><span class="pln"> </span><span class="typ">Suite</span></code></li><li class="L2"><code><span class="pun">========================================</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pun">[</span><span class="pln">VALID</span><span class="pun">]</span><span class="pln"> </span><span class="typ">Testing</span><span class="pln"> valid scripts </span><span class="pun">(</span><span class="pln">tests</span><span class="pun">/</span><span class="pln">valid</span><span class="pun">/)</span></code></li><li class="L5"><code><span class="pun">----------------------------------------</span></code></li><li class="L6"><code><span class="pln">  </span><span class="typ">Test</span><span class="pun">:</span><span class="pln"> </span><span class="lit">01</span><span class="pln">_basic_syntax</span><span class="pun">.</span><span class="pln">js </span><span class="pun">[</span><span class="pln">PASS</span><span class="pun">]</span></code></li><li class="L7"><code><span class="pln">  </span><span class="typ">Test</span><span class="pun">:</span><span class="pln"> </span><span class="lit">02</span><span class="pln">_asi_cases</span><span class="pun">.</span><span class="pln">js </span><span class="pun">[</span><span class="pln">PASS</span><span class="pun">]</span></code></li><li class="L8"><code><span class="pln">  </span><span class="typ">Test</span><span class="pun">:</span><span class="pln"> </span><span class="lit">03</span><span class="pln">_unicode</span><span class="pun">.</span><span class="pln">js </span><span class="pun">[</span><span class="pln">PASS</span><span class="pun">]</span></code></li><li class="L9"><code><span class="pln">  </span><span class="typ">Test</span><span class="pun">:</span><span class="pln"> </span><span class="lit">04</span><span class="pln">_control_flow</span><span class="pun">.</span><span class="pln">js </span><span class="pun">[</span><span class="pln">PASS</span><span class="pun">]</span></code></li><li class="L0"><code><span class="pln">  </span><span class="typ">Test</span><span class="pun">:</span><span class="pln"> </span><span class="lit">05</span><span class="pln">_expressions</span><span class="pun">.</span><span class="pln">js </span><span class="pun">[</span><span class="pln">PASS</span><span class="pun">]</span></code></li><li class="L1"><code><span class="pln">  </span><span class="typ">Test</span><span class="pun">:</span><span class="pln"> </span><span class="lit">06</span><span class="pln">_classes</span><span class="pun">.</span><span class="pln">js </span><span class="pun">[</span><span class="pln">PASS</span><span class="pun">]</span></code></li><li class="L2"><code><span class="pln">  </span><span class="typ">Test</span><span class="pun">:</span><span class="pln"> </span><span class="lit">07</span><span class="pln">_regex_division</span><span class="pun">.</span><span class="pln">js </span><span class="pun">[</span><span class="pln">PASS</span><span class="pun">]</span></code></li><li class="L3"><code><span class="pln">  </span><span class="typ">Test</span><span class="pun">:</span><span class="pln"> </span><span class="lit">08</span><span class="pln">_operator_precedence</span><span class="pun">.</span><span class="pln">js </span><span class="pun">[</span><span class="pln">PASS</span><span class="pun">]</span></code></li><li class="L4"><code><span class="pln">  </span><span class="typ">Test</span><span class="pun">:</span><span class="pln"> </span><span class="lit">09</span><span class="pln">_nested_structures</span><span class="pun">.</span><span class="pln">js </span><span class="pun">[</span><span class="pln">PASS</span><span class="pun">]</span></code></li><li class="L5"><code></code></li><li class="L6"><code><span class="pun">[</span><span class="pln">INVALID</span><span class="pun">]</span><span class="pln"> </span><span class="typ">Testing</span><span class="pln"> invalid scripts </span><span class="pun">(</span><span class="pln">tests</span><span class="pun">/</span><span class="pln">invalid</span><span class="pun">/)</span></code></li><li class="L7"><code><span class="pun">----------------------------------------</span></code></li><li class="L8"><code><span class="pln">  </span><span class="typ">Test</span><span class="pun">:</span><span class="pln"> </span><span class="lit">01</span><span class="pln">_missing_paren</span><span class="pun">.</span><span class="pln">js </span><span class="pun">[</span><span class="pln">PASS</span><span class="pun">]</span><span class="pln"> </span><span class="typ">Error</span><span class="pln"> detected</span></code></li><li class="L9"><code><span class="pln">  </span><span class="typ">Test</span><span class="pun">:</span><span class="pln"> </span><span class="lit">02</span><span class="pln">_unterminated_string</span><span class="pun">.</span><span class="pln">js </span><span class="pun">[</span><span class="pln">PASS</span><span class="pun">]</span><span class="pln"> </span><span class="typ">Error</span><span class="pln"> detected</span></code></li><li class="L0"><code><span class="pln">  </span><span class="typ">Test</span><span class="pun">:</span><span class="pln"> </span><span class="lit">03</span><span class="pln">_invalid_assignment</span><span class="pun">.</span><span class="pln">js </span><span class="pun">[</span><span class="pln">PASS</span><span class="pun">]</span><span class="pln"> </span><span class="typ">Error</span><span class="pln"> detected</span></code></li><li class="L1"><code><span class="pln">  </span><span class="typ">Test</span><span class="pun">:</span><span class="pln"> </span><span class="lit">04</span><span class="pln">_throw_newline</span><span class="pun">.</span><span class="pln">js </span><span class="pun">[</span><span class="pln">PASS</span><span class="pun">]</span><span class="pln"> </span><span class="typ">Error</span><span class="pln"> detected</span></code></li><li class="L2"><code><span class="pln">  </span><span class="typ">Test</span><span class="pun">:</span><span class="pln"> </span><span class="lit">05</span><span class="pln">_typo_keyword</span><span class="pun">.</span><span class="pln">js </span><span class="pun">[</span><span class="pln">PASS</span><span class="pun">]</span><span class="pln"> </span><span class="typ">Error</span><span class="pln"> detected</span></code></li><li class="L3"><code><span class="pln">  </span><span class="typ">Test</span><span class="pun">:</span><span class="pln"> </span><span class="lit">06</span><span class="pln">_unclosed_brace</span><span class="pun">.</span><span class="pln">js </span><span class="pun">[</span><span class="pln">PASS</span><span class="pun">]</span><span class="pln"> </span><span class="typ">Error</span><span class="pln"> detected</span></code></li><li class="L4"><code><span class="pln">  </span><span class="typ">Test</span><span class="pun">:</span><span class="pln"> </span><span class="lit">07</span><span class="pln">_invalid_number</span><span class="pun">.</span><span class="pln">js </span><span class="pun">[</span><span class="pln">PASS</span><span class="pun">]</span><span class="pln"> </span><span class="typ">Error</span><span class="pln"> detected</span></code></li><li class="L5"><code><span class="pln">  </span><span class="typ">Test</span><span class="pun">:</span><span class="pln"> </span><span class="lit">08</span><span class="pln">_duplicate_param</span><span class="pun">.</span><span class="pln">js </span><span class="pun">[</span><span class="pln">PASS</span><span class="pun">]</span><span class="pln"> </span><span class="typ">Error</span><span class="pln"> detected</span></code></li><li class="L6"><code></code></li><li class="L7"><code><span class="pun">========================================</span></code></li><li class="L8"><code><span class="pln">  </span><span class="typ">Test</span><span class="pln"> </span><span class="typ">Summary</span></code></li><li class="L9"><code><span class="pun">========================================</span></code></li><li class="L0"><code></code></li><li class="L1"><code><span class="typ">Total</span><span class="pln"> tests</span><span class="pun">:</span><span class="pln"> </span><span class="lit">17</span></code></li><li class="L2"><code><span class="typ">Passed</span><span class="pun">:</span><span class="pln"> </span><span class="lit">17</span></code></li><li class="L3"><code><span class="typ">Failed</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L4"><code></code></li><li class="L5"><code><span class="typ">Valid</span><span class="pln"> scripts</span><span class="pun">:</span><span class="pln"> </span><span class="lit">9</span><span class="pun">/</span><span class="lit">9</span><span class="pln"> passed</span></code></li><li class="L6"><code><span class="typ">Invalid</span><span class="pln"> scripts</span><span class="pun">:</span><span class="pln"> </span><span class="lit">8</span><span class="pun">/</span><span class="lit">8</span><span class="pln"> passed</span></code></li><li class="L7"><code></code></li><li class="L8"><code><span class="pun">[</span><span class="pln">SUCCESS</span><span class="pun">]</span><span class="pln"> </span><span class="typ">All</span><span class="pln"> tests passed</span><span class="pun">!</span></code></li></ol></pre><h2 id="h2-u4F7Fu7528u793Au4F8B"><a name="ä½¿ç”¨ç¤ºä¾‹" class="reference-link"></a><span class="header-link octicon octicon-link"></span>ä½¿ç”¨ç¤ºä¾‹</h2><h3 id="h3--1-"><a name="ç¤ºä¾‹1ï¼šåˆæ³•çš„ä»£ç " class="reference-link"></a><span class="header-link octicon octicon-link"></span>ç¤ºä¾‹1ï¼šåˆæ³•çš„ä»£ç </h3><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-javascript"><span class="com">// test.js</span></code></li><li class="L1"><code class="lang-javascript"><span class="pln">let x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">10</span></code></li><li class="L2"><code class="lang-javascript"><span class="kwd">const</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">20</span></code></li><li class="L3"><code class="lang-javascript"></code></li><li class="L4"><code class="lang-javascript"><span class="kwd">function</span><span class="pln"> add</span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code class="lang-javascript"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> a </span><span class="pun">+</span><span class="pln"> b</span></code></li><li class="L6"><code class="lang-javascript"><span class="pun">}</span></code></li><li class="L7"><code class="lang-javascript"></code></li><li class="L8"><code class="lang-javascript"><span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">add</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">))</span></code></li></ol></pre>
<p>è¿è¡Œï¼š</p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-bash"><span class="pln">$ js_parser test</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L1"><code class="lang-bash"><span class="pun">âœ“</span><span class="pln"> </span><span class="typ">Syntax</span><span class="pln"> is valid</span></code></li><li class="L2"><code class="lang-bash"><span class="typ">File</span><span class="pun">:</span><span class="pln"> test</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L3"><code class="lang-bash"><span class="typ">Status</span><span class="pun">:</span><span class="pln"> PASSED</span></code></li></ol></pre>
<h3 id="h3--2-asi-return-"><a name="ç¤ºä¾‹2ï¼šASIæµ‹è¯•ï¼ˆreturnæ¢è¡Œï¼‰" class="reference-link"></a><span class="header-link octicon octicon-link"></span>ç¤ºä¾‹2ï¼šASIæµ‹è¯•ï¼ˆreturnæ¢è¡Œï¼‰</h3><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-javascript"><span class="com">// test_asi.js</span></code></li><li class="L1"><code class="lang-javascript"><span class="kwd">function</span><span class="pln"> test</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="lang-javascript"><span class="pln">    </span><span class="kwd">return</span></code></li><li class="L3"><code class="lang-javascript"><span class="pln">    </span><span class="lit">42</span></code></li><li class="L4"><code class="lang-javascript"><span class="pun">}</span></code></li></ol></pre>
<p>è¿è¡Œï¼š</p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-bash"><span class="pln">$ js_parser test_asi</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L1"><code class="lang-bash"><span class="pun">âœ“</span><span class="pln"> </span><span class="typ">Syntax</span><span class="pln"> is valid</span></code></li><li class="L2"><code class="lang-bash"><span class="typ">File</span><span class="pun">:</span><span class="pln"> test_asi</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L3"><code class="lang-bash"><span class="typ">Status</span><span class="pun">:</span><span class="pln"> PASSED</span></code></li></ol></pre>
<p><strong>è¯´æ˜</strong>ï¼šreturnåæ¢è¡Œï¼ŒASIè‡ªåŠ¨æ’å…¥åˆ†å·ï¼Œ42æˆä¸ºç‹¬ç«‹è¯­å¥</p>
<h3 id="h3--3-throw-"><a name="ç¤ºä¾‹3ï¼šé”™è¯¯æ£€æµ‹ï¼ˆthrowæ¢è¡Œï¼‰" class="reference-link"></a><span class="header-link octicon octicon-link"></span>ç¤ºä¾‹3ï¼šé”™è¯¯æ£€æµ‹ï¼ˆthrowæ¢è¡Œï¼‰</h3><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-javascript"><span class="com">// test_error.js</span></code></li><li class="L1"><code class="lang-javascript"><span class="kwd">function</span><span class="pln"> test</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="lang-javascript"><span class="pln">    </span><span class="kwd">throw</span></code></li><li class="L3"><code class="lang-javascript"><span class="pln">    </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Error</span><span class="pun">(</span><span class="str">"test"</span><span class="pun">)</span></code></li><li class="L4"><code class="lang-javascript"><span class="pun">}</span></code></li></ol></pre>
<p>è¿è¡Œï¼š</p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-bash"><span class="pln">$ js_parser test_error</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L1"><code class="lang-bash"><span class="pun">âœ—</span><span class="pln"> </span><span class="typ">Syntax</span><span class="pln"> error detected</span></code></li><li class="L2"><code class="lang-bash"><span class="typ">File</span><span class="pun">:</span><span class="pln"> test_error</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L3"><code class="lang-bash"><span class="typ">Status</span><span class="pun">:</span><span class="pln"> FAILED</span></code></li><li class="L4"><code class="lang-bash"><span class="typ">Error</span><span class="pln"> at line </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> column </span><span class="lit">5</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Line</span><span class="pln"> </span><span class="kwd">break</span><span class="pln"> is not allowed between </span><span class="str">'throw'</span><span class="pln"> and its expression</span></code></li></ol></pre>
<h3 id="h3--4-unicode-"><a name="ç¤ºä¾‹4ï¼šUnicodeæ”¯æŒ" class="reference-link"></a><span class="header-link octicon octicon-link"></span>ç¤ºä¾‹4ï¼šUnicodeæ”¯æŒ</h3><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-javascript"><span class="com">// test_unicode.js</span></code></li><li class="L1"><code class="lang-javascript"><span class="kwd">const</span><span class="pln"> </span><span class="pun">å˜é‡å</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"ä¸­æ–‡å­—ç¬¦ä¸²"</span><span class="pun">;</span></code></li><li class="L2"><code class="lang-javascript"><span class="kwd">const</span><span class="pln"> </span><span class="pun">Î¼</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3.14159</span><span class="pun">;</span></code></li><li class="L3"><code class="lang-javascript"><span class="kwd">const</span><span class="pln"> emoji </span><span class="pun">=</span><span class="pln"> </span><span class="str">"ğŸ˜€ğŸ‰"</span><span class="pun">;</span></code></li><li class="L4"><code class="lang-javascript"></code></li><li class="L5"><code class="lang-javascript"><span class="pln">console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(å˜é‡å);</span></code></li></ol></pre>
<p>è¿è¡Œï¼š</p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-bash"><span class="pln">$ js_parser test_unicode</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L1"><code class="lang-bash"><span class="pun">âœ“</span><span class="pln"> </span><span class="typ">Syntax</span><span class="pln"> is valid</span></code></li><li class="L2"><code class="lang-bash"><span class="typ">File</span><span class="pun">:</span><span class="pln"> test_unicode</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L3"><code class="lang-bash"><span class="typ">Status</span><span class="pun">:</span><span class="pln"> PASSED</span></code></li></ol></pre>
<h2 id="h2-u6280u672Fu5B9Eu73B0u7EC6u8282"><a name="æŠ€æœ¯å®ç°ç»†èŠ‚" class="reference-link"></a><span class="header-link octicon octicon-link"></span>æŠ€æœ¯å®ç°ç»†èŠ‚</h2><h3 id="h3--lexer-"><a name="è¯æ³•åˆ†æå™¨ï¼ˆLexerï¼‰" class="reference-link"></a><span class="header-link octicon octicon-link"></span>è¯æ³•åˆ†æå™¨ï¼ˆLexerï¼‰</h3><p><strong>æ ¸å¿ƒæ•°æ®ç»“æ„ï¼š</strong></p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-c"><span class="kwd">typedef</span><span class="pln"> </span><span class="kwd">struct</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="lang-c"><span class="pln">    </span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">char</span><span class="pln"> </span><span class="pun">*</span><span class="pln">source</span><span class="pun">;</span><span class="pln">      </span><span class="com">// æºä»£ç </span></code></li><li class="L2"><code class="lang-c"><span class="pln">    </span><span class="typ">size_t</span><span class="pln"> current</span><span class="pun">;</span><span class="pln">          </span><span class="com">// å½“å‰ä½ç½®</span></code></li><li class="L3"><code class="lang-c"><span class="pln">    </span><span class="typ">Position</span><span class="pln"> position</span><span class="pun">;</span><span class="pln">       </span><span class="com">// è¡Œå·ã€åˆ—å·</span></code></li><li class="L4"><code class="lang-c"><span class="pln">    </span><span class="kwd">bool</span><span class="pln"> last_was_newline</span><span class="pun">;</span><span class="pln">   </span><span class="com">// ä¸Šä¸€ä¸ªå­—ç¬¦æ˜¯å¦ä¸ºæ¢è¡Œï¼ˆASIåˆ¤æ–­ï¼‰</span></code></li><li class="L5"><code class="lang-c"><span class="pln">    </span><span class="typ">Token</span><span class="pln"> </span><span class="pun">*</span><span class="pln">prev_token</span><span class="pun">;</span><span class="pln">       </span><span class="com">// ä¸Šä¸€ä¸ªtokenï¼ˆä¸Šä¸‹æ–‡åˆ¤æ–­ï¼‰</span></code></li><li class="L6"><code class="lang-c"><span class="pun">}</span><span class="pln"> </span><span class="typ">Lexer</span><span class="pun">;</span></code></li></ol></pre>
<p><strong>å…³é”®åŠŸèƒ½ï¼š</strong></p>
<ul>
<li>Unicodeå­—ç¬¦å¤„ç†ï¼ˆ<code>is_unicode_id_start</code>ã€<code>is_unicode_id_continue</code>ï¼‰</li><li>æ­£åˆ™è¡¨è¾¾å¼ä¸é™¤æ³•è¿ç®—ç¬¦åŒºåˆ†ï¼ˆ<code>can_precede_regex</code>ï¼‰</li><li>æ¨¡æ¿å­—ç¬¦ä¸²å¤„ç†ï¼ˆæ”¯æŒ<code>${}</code>è¡¨è¾¾å¼ï¼‰</li><li>æ³¨é‡Šè·³è¿‡ï¼ˆå•è¡Œ<code>//</code>å’Œå—<code>/* */</code>ï¼‰</li></ul>
<h3 id="h3--parser-"><a name="è¯­æ³•åˆ†æå™¨ï¼ˆParserï¼‰" class="reference-link"></a><span class="header-link octicon octicon-link"></span>è¯­æ³•åˆ†æå™¨ï¼ˆParserï¼‰</h3><p><strong>è§£ææ–¹æ³•ï¼š</strong>é€’å½’ä¸‹é™åˆ†ææ³•</p>
<p><strong>ASIå®ç°ï¼š</strong></p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-c"><span class="kwd">bool</span><span class="pln"> parser_should_insert_semicolon</span><span class="pun">(</span><span class="typ">Parser</span><span class="pln"> </span><span class="pun">*</span><span class="pln">parser</span><span class="pun">,</span><span class="pln"> </span><span class="typ">TokenType</span><span class="pln"> prev_type</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="lang-c"><span class="pln">    </span><span class="com">// è§„åˆ™1: é‡åˆ°æ¢è¡Œ</span></code></li><li class="L2"><code class="lang-c"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">parser</span><span class="pun">-&gt;</span><span class="pln">current_token</span><span class="pun">-&gt;</span><span class="pln">preceded_by_newline</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L3"><code class="lang-c"></code></li><li class="L4"><code class="lang-c"><span class="pln">    </span><span class="com">// è§„åˆ™2: é‡åˆ°}æˆ–EOF</span></code></li><li class="L5"><code class="lang-c"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">parser</span><span class="pun">-&gt;</span><span class="pln">current_token</span><span class="pun">-&gt;</span><span class="pln">type </span><span class="pun">==</span><span class="pln"> TOKEN_RBRACE </span><span class="pun">||</span></code></li><li class="L6"><code class="lang-c"><span class="pln">        parser</span><span class="pun">-&gt;</span><span class="pln">current_token</span><span class="pun">-&gt;</span><span class="pln">type </span><span class="pun">==</span><span class="pln"> TOKEN_EOF</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L7"><code class="lang-c"></code></li><li class="L8"><code class="lang-c"><span class="pln">    </span><span class="com">// è§„åˆ™3: ç‰¹å®šè¯­å¥åæ¢è¡Œ</span></code></li><li class="L9"><code class="lang-c"><span class="pln">    </span><span class="kwd">switch</span><span class="pln"> </span><span class="pun">(</span><span class="pln">prev_type</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code class="lang-c"><span class="pln">        </span><span class="kwd">case</span><span class="pln"> TOKEN_RETURN</span><span class="pun">:</span></code></li><li class="L1"><code class="lang-c"><span class="pln">        </span><span class="kwd">case</span><span class="pln"> TOKEN_BREAK</span><span class="pun">:</span></code></li><li class="L2"><code class="lang-c"><span class="pln">        </span><span class="kwd">case</span><span class="pln"> TOKEN_CONTINUE</span><span class="pun">:</span></code></li><li class="L3"><code class="lang-c"><span class="pln">        </span><span class="kwd">case</span><span class="pln"> TOKEN_THROW</span><span class="pun">:</span></code></li><li class="L4"><code class="lang-c"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">parser</span><span class="pun">-&gt;</span><span class="pln">current_token</span><span class="pun">-&gt;</span><span class="pln">preceded_by_newline</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L5"><code class="lang-c"><span class="pln">            </span><span class="kwd">break</span><span class="pun">;</span></code></li><li class="L6"><code class="lang-c"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7"><code class="lang-c"></code></li><li class="L8"><code class="lang-c"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L9"><code class="lang-c"><span class="pun">}</span></code></li></ol></pre>
<p><strong>è¡¨è¾¾å¼ä¼˜å…ˆçº§å¤„ç†ï¼š</strong></p>
<ul>
<li>æ¡ä»¶è¡¨è¾¾å¼ï¼ˆ<code>? :</code>ï¼‰</li><li>é€»è¾‘æˆ–/ä¸ï¼ˆ<code>||</code>ã€<code>&amp;&amp;</code>ï¼‰</li><li>ä½è¿ç®—ï¼ˆ<code>|</code>ã€<code>^</code>ã€<code>&amp;</code>ï¼‰</li><li>æ¯”è¾ƒè¿ç®—ï¼ˆ<code>==</code>ã€<code>&lt;</code>ã€<code>&gt;</code>ç­‰ï¼‰</li><li>ç§»ä½ï¼ˆ<code>&lt;&lt;</code>ã€<code>&gt;&gt;</code>ã€<code>&gt;&gt;&gt;</code>ï¼‰</li><li>åŠ å‡ï¼ˆ<code>+</code>ã€<code>-</code>ï¼‰</li><li>ä¹˜é™¤æ¨¡ï¼ˆ<code>*</code>ã€<code>/</code>ã€<code>%</code>ï¼‰</li><li>æŒ‡æ•°ï¼ˆ<code>**</code>ï¼Œå³ç»“åˆï¼‰</li><li>ä¸€å…ƒè¿ç®—ï¼ˆ<code>!</code>ã€<code>~</code>ã€<code>typeof</code>ç­‰ï¼‰</li><li>æˆå‘˜è®¿é—®ï¼ˆ<code>.</code>ã€<code>[]</code>ï¼‰</li></ul>
<h2 id="h2-u6D4Bu8BD5u7528u4F8Bu8BF4u660E"><a name="æµ‹è¯•ç”¨ä¾‹è¯´æ˜" class="reference-link"></a><span class="header-link octicon octicon-link"></span>æµ‹è¯•ç”¨ä¾‹è¯´æ˜</h2><h3 id="h3--tests-valid-"><a name="åˆæ³•è„šæœ¬æµ‹è¯•ï¼ˆtests/valid/ï¼‰" class="reference-link"></a><span class="header-link octicon octicon-link"></span>åˆæ³•è„šæœ¬æµ‹è¯•ï¼ˆtests/valid/ï¼‰</h3><table>
<thead>
<tr>
<th>æ–‡ä»¶</th>
<th>æµ‹è¯•å†…å®¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>01_basic_syntax.js</td>
<td>åŸºæœ¬å˜é‡å£°æ˜ã€å‡½æ•°ã€å¯¹è±¡ã€æ•°ç»„</td>
</tr>
<tr>
<td>02_asi_cases.js</td>
<td>ASIçš„å„ç§åœºæ™¯ï¼ˆreturn/break/continueæ¢è¡Œç­‰ï¼‰</td>
</tr>
<tr>
<td>03_unicode.js</td>
<td>Unicodeæ ‡è¯†ç¬¦ã€å­—ç¬¦ä¸²ã€è½¬ä¹‰åºåˆ—</td>
</tr>
<tr>
<td>04_control_flow.js</td>
<td>if/while/for/switch/try-catchç­‰æ§åˆ¶æµ</td>
</tr>
<tr>
<td>05_expressions.js</td>
<td>å„ç±»è¿ç®—ç¬¦ã€æˆå‘˜è®¿é—®ã€å‡½æ•°è°ƒç”¨</td>
</tr>
<tr>
<td>06_classes.js</td>
<td>ç±»å®šä¹‰ã€ç»§æ‰¿ã€é™æ€æ–¹æ³•ã€getter/setter</td>
</tr>
<tr>
<td>07_regex_division.js</td>
<td>æ­£åˆ™è¡¨è¾¾å¼ä¸é™¤æ³•è¿ç®—ç¬¦æ··åˆä½¿ç”¨</td>
</tr>
<tr>
<td>08_operator_precedence.js</td>
<td>è¿ç®—ç¬¦ä¼˜å…ˆçº§å’Œç»“åˆæ€§</td>
</tr>
<tr>
<td>09_nested_structures.js</td>
<td>æ·±å±‚åµŒå¥—çš„æ•°æ®ç»“æ„å’Œæ§åˆ¶æµ</td>
</tr>
</tbody>
</table>
<h3 id="h3--tests-invalid-"><a name="é”™è¯¯è„šæœ¬æµ‹è¯•ï¼ˆtests/invalid/ï¼‰" class="reference-link"></a><span class="header-link octicon octicon-link"></span>é”™è¯¯è„šæœ¬æµ‹è¯•ï¼ˆtests/invalid/ï¼‰</h3><table>
<thead>
<tr>
<th>æ–‡ä»¶</th>
<th>é”™è¯¯ç±»å‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>01_missing_paren.js</td>
<td>ç¼ºå°‘å³æ‹¬å·</td>
</tr>
<tr>
<td>02_unterminated_string.js</td>
<td>æœªé—­åˆçš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>03_invalid_assignment.js</td>
<td>æ— æ•ˆçš„èµ‹å€¼ç›®æ ‡</td>
</tr>
<tr>
<td>04_throw_newline.js</td>
<td>throwåæ¢è¡Œï¼ˆASIä¸å…è®¸ï¼‰</td>
</tr>
<tr>
<td>05_typo_keyword.js</td>
<td>å…³é”®å­—æ‹¼å†™é”™è¯¯</td>
</tr>
<tr>
<td>06_unclosed_brace.js</td>
<td>æœªé—­åˆçš„å¤§æ‹¬å·</td>
</tr>
<tr>
<td>07_invalid_number.js</td>
<td>éæ³•æ•°å­—æ ¼å¼</td>
</tr>
<tr>
<td>08_duplicate_param.js</td>
<td>ç¼ºå°‘å‡½æ•°ä½“</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="h2-u5DF2u77E5u9650u5236"><a name="å·²çŸ¥é™åˆ¶" class="reference-link"></a><span class="header-link octicon octicon-link"></span>å·²çŸ¥é™åˆ¶</h2><ol>
<li><strong>ç®€åŒ–çš„Unicodeå¤„ç†</strong>ï¼šUnicodeå­—ç¬¦åˆ†ç±»ä½¿ç”¨ç®€åŒ–ç®—æ³•ï¼Œä¸æ˜¯å®Œæ•´çš„Unicodeæ•°æ®åº“</li><li><strong>æ¨¡æ¿å­—ç¬¦ä¸²</strong>ï¼šæ”¯æŒåŸºæœ¬è¯­æ³•ï¼Œä½†ä¸å®Œæ•´è§£æ<code>${}</code>å†…çš„è¡¨è¾¾å¼</li><li><strong>æ­£åˆ™è¡¨è¾¾å¼</strong>ï¼šè¯†åˆ«æ­£åˆ™è¯­æ³•ä½†ä¸éªŒè¯æ­£åˆ™è§„åˆ™çš„æ­£ç¡®æ€§</li><li><strong>æ¨¡å—ç³»ç»Ÿ</strong>ï¼šæ”¯æŒ<code>import</code>/<code>export</code>å…³é”®å­—ä½†ä¸å¤„ç†æ¨¡å—è§£æé€»è¾‘</li><li><strong>è¯­ä¹‰åˆ†æ</strong>ï¼šä»…åšè¯­æ³•æ ¡éªŒï¼Œä¸åšç±»å‹æ£€æŸ¥ã€ä½œç”¨åŸŸåˆ†æç­‰è¯­ä¹‰åˆ†æ</li></ol>
<h2 id="h2-u672Au6765u6539u8FDBu65B9u5411"><a name="æœªæ¥æ”¹è¿›æ–¹å‘" class="reference-link"></a><span class="header-link octicon octicon-link"></span>æœªæ¥æ”¹è¿›æ–¹å‘</h2><ol>
<li><strong>ç®­å¤´å‡½æ•°</strong> - éœ€è¦å¤æ‚çš„å›æº¯æœºåˆ¶åŒºåˆ†å‚æ•°åˆ—è¡¨å’Œè¡¨è¾¾å¼</li><li><strong>å±•å¼€è¿ç®—ç¬¦</strong> - å®Œæ•´æ”¯æŒ <code>...</code> åœ¨ä¸åŒä¸Šä¸‹æ–‡ä¸­çš„è¯­ä¹‰</li><li><strong>è§£æ„èµ‹å€¼</strong> - å¯¹è±¡å’Œæ•°ç»„è§£æ„çš„å®Œæ•´å®ç°</li><li><strong>async/await</strong> - å¼‚æ­¥è¯­æ³•æ”¯æŒ</li><li><strong>æ¨¡å—ç³»ç»Ÿ</strong> - import/export è¯­å¥çš„å®Œæ•´å®ç°</li></ol>
<h2 id="h2-u53C2u8003u8D44u6599"><a name="å‚è€ƒèµ„æ–™" class="reference-link"></a><span class="header-link octicon octicon-link"></span>å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://tc39.es/ecma262/">ECMA262æ ‡å‡†</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript">MDN JavaScriptæ–‡æ¡£</a></li><li><a href="https://tc39.es/ecma262/#sec-automatic-semicolon-insertion">Automatic Semicolon Insertion</a></li></ul>
<h2 id="h2-u5F00u53D1u73AFu5883"><a name="å¼€å‘ç¯å¢ƒ" class="reference-link"></a><span class="header-link octicon octicon-link"></span>å¼€å‘ç¯å¢ƒ</h2><ul>
<li><strong>ç¼–è¯‘å™¨</strong>ï¼šGCC 7.0+ æˆ– MSVC 2015+</li><li><strong>æ ‡å‡†</strong>ï¼šC11</li><li><strong>å¹³å°</strong>ï¼šWindows / Linux / macOS</li></ul>
<h2 id="h2-u4F5Cu8005"><a name="ä½œè€…" class="reference-link"></a><span class="header-link octicon octicon-link"></span>ä½œè€…</h2><p>ç¼–è¯‘æŠ€æœ¯ - åŸºäºCè¯­è¨€çš„JavaScriptè¯­æ³•è§£æå™¨ - å¤§è¿ç†å·¥å¤§å­¦è½¯2301Semix Wang</p>

</body>
</html>